<launch>
      <arg name="mav_name" default="flightgoggles"/>

      <rosparam command="load" file="$(find riseq_common)/config/drones/$(arg mav_name).yaml"/>

	<node pkg="riseq_control" type="position_controller_node" name="position_controller" output="screen">
		<remap from="/riseq/uav/state" to="/uav/state"/>
		<!--remap from="/riseq/uav/rateThrust" to="/uav/input/rateThrust"/-->
            <remap from="/riseq/uav/trajectory" to="/uav_ref_trajectory"/> 
            <remap from="/riseq/uav/motorspeed" to="/uav/input/motorspeed"/>
            <param name="max_acc" value="10.0" />
            <param name="riseq/Kp_x" value="4.0" />
            <param name="riseq/Kp_y" value="4.0" />
            <param name="riseq/Kp_z" value="4.5" />   
            <param name="riseq/Kd_x" value="1.0" />
            <param name="riseq/Kd_y" value="1.0" />
            <param name="riseq/Kd_z" value="1.0" />
            <param name="riseq/Kr" value="8.0"/>
	</node>
      <node pkg="riseq_common" type="flightgoggles_arm" name="flightgoggles_arm_node"/>

      <!-- /uav/state/pose/pose/position /riseq/uav/trajectory/pose/position /riseq/uav/desired_orientation/pose/orientation-->
      <node name="rqt_plot" type="rqt_plot" pkg="rqt_plot" args="/uav/input/motorspeed/angular_velocities[0] /uav/input/motorspeed/angular_velocities[1] /uav/input/motorspeed/angular_velocities[2] /uav/input/motorspeed/angular_velocities[3] "/>
      <node pkg="rosbag" name="rec" type="record" args="-o controller_test /uav_ref_trajectory /uav/state /uav/input/rateThrust /uav/input/motorspeed"/>

</launch>